include(CheckCCompilerFlag)

set (TMAP_COMPILE_FLAGS "-D_TMAP_BWT_RUN_TYPE=0 -D_USE_KNETFILE -DSAMTOOLS_MAIN -D__STDC_LIMIT_MACROS -DTMAP_MMAP=1")

check_c_compiler_flag(-fdiagnostics-color=never HAS_DIAGNOSTICS_COLOR)
if (HAS_DIAGNOSTICS_COLOR)
    set (TMAP_COMPILE_FLAGS, "${TMAP_COMPILE_FLAGS} -fdiagnostics-color=never")
endif()

include(CheckCXXCompilerFlag)
check_cxx_compiler_flag (-faligned-new HAS_ALIGNED_NEW)
if (HAS_ALIGNED_NEW)
  set (TMAP_COMPILE_FLAGS, "${TMAP_COMPILE_FLAGS} -faligned-new")
endif ()


set (SAMTOOLS ${ION_TS_EXTERNAL}/samtools_tmap_e783ea9/samtools)
set (TMAP_DIR                   ${PROJECT_SOURCE_DIR}/../../TMAP)
set (TMAP_SRC_DIR               ${TMAP_DIR}/src)
set (TMAP_SRC_INDEX_DIR         ${TMAP_SRC_DIR}/index)
set (TMAP_SRC_IO_DIR            ${TMAP_SRC_DIR}/io)
set (TMAP_SRC_REALIGN_DIR       ${TMAP_SRC_DIR}/realign)
set (TMAP_SRC_SAM2FS_DIR        ${TMAP_SRC_DIR}/sam2fs)
set (TMAP_SRC_SEQ_DIR           ${TMAP_SRC_DIR}/seq)
set (TMAP_SRC_SERVER_DIR        ${TMAP_SRC_DIR}/server)
set (TMAP_SRC_SW_DIR            ${TMAP_SRC_DIR}/sw)
set (TMAP_SRC_SWLIB_DIR         ${TMAP_SRC_SW_DIR}/lib)
set (TMAP_SRC_UTIL_DIR          ${TMAP_SRC_DIR}/util)
set (TMAP_SRC_MAP_DIR           ${TMAP_SRC_DIR}/map)
set (TMAP_SRC_MAP1_DIR          ${TMAP_SRC_MAP_DIR}/map1)
set (TMAP_SRC_MAP2_DIR          ${TMAP_SRC_MAP_DIR}/map2)
set (TMAP_SRC_MAP3_DIR          ${TMAP_SRC_MAP_DIR}/map3)
set (TMAP_SRC_MAP4_DIR          ${TMAP_SRC_MAP_DIR}/map4)
set (TMAP_SRC_MAPALL_DIR        ${TMAP_SRC_MAP_DIR}/mapall)
set (TMAP_SRC_MAPVSW_DIR        ${TMAP_SRC_MAP_DIR}/mapvsw)
set (TMAP_SRC_MAP_PAIRING_DIR   ${TMAP_SRC_MAP_DIR}/pairing)
set (TMAP_SRC_MAP_UTIL_DIR      ${TMAP_SRC_MAP_DIR}/util)

include_directories (BEFORE ${ION_TS_EXTERNAL}/samtools_tmap_e783ea9)
include_directories (BEFORE ${ION_TS_EXTERNAL}/samtools_tmap_e783ea9/samtools)
